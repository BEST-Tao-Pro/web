import{_ as G,h as H,r as i,a as m,o as c,j as J,u as t,c as S,w as o,e as j,b as a,F as K,f as z,d as V,i as _,x as L,m as v}from"./index-114d8dd6.js";import{a as y}from"./axios-aba6f0e0.js";const M={style:{display:"flex"}},O={__name:"user",setup(Q){let h=H(),x=i(),C=i(),w=i(1),b=i(15),k=i(100),u=i(),r=i(),U=i(),n=i({username:"",age:"",gender:"",role:"学生",password:"",phone:""});y.get("/api/user/"+w.value+"/"+b.value).then(s=>{C.value=s.data.records,k.value=s.data.total});let E=(s,e)=>{y.delete("/api/user/"+e.id).then(()=>{v.success("删除成功"),y.get("/api/user/"+w.value+"/"+b.value).then(d=>{C.value=d.data.records})}).catch(d=>{v.error(d.message)})},F=(s,e)=>{u.value=e,r.value="updata"},P=s=>{x.value=s,y.get("/api/user/"+x.value+"/"+b.value).then(e=>{C.value=e.data.records})},T=()=>{y.put("/api/user",u.value).then(()=>{v.success("数据已更新！"),r.value=""}).catch(s=>{v.error(s.message)})},$=()=>{console.log(n,n.value),y.post("/api/user",n.value).then(()=>{v.success("用户已添加！"),r.value=""}).catch(s=>{v.error(s.message)})},D=()=>{y.get("/api/user/"+U.value).then(s=>{C.value=s.data,v.success("查询成功！一共有"+s.data.length+"条数据")})};return(s,e)=>{const d=m("el-input"),p=m("el-form-item"),f=m("el-button"),B=m("el-form"),g=m("el-table-column"),I=m("el-table"),R=m("el-pagination"),N=m("el-col"),q=m("el-row");return c(),J(K,null,[t(r)=="updata"?(c(),S(B,{key:0,model:t(u),"label-width":"50px"},{default:o(()=>[z("div",null,[a(p,{label:"id"},{default:o(()=>[a(d,{modelValue:t(u).id,"onUpdate:modelValue":e[0]||(e[0]=l=>t(u).id=l),type:"text",disabled:""},null,8,["modelValue"])]),_:1}),a(p,{label:"姓名"},{default:o(()=>[a(d,{modelValue:t(u).username,"onUpdate:modelValue":e[1]||(e[1]=l=>t(u).username=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"性别"},{default:o(()=>[a(d,{modelValue:t(u).gender,"onUpdate:modelValue":e[2]||(e[2]=l=>t(u).gender=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"角色"},{default:o(()=>[a(d,{modelValue:t(u).role,"onUpdate:modelValue":e[3]||(e[3]=l=>t(u).role=l),type:"text",disabled:t(h).state.userdata.role!="管理员"},null,8,["modelValue","disabled"])]),_:1}),a(p,{label:"年龄"},{default:o(()=>[a(d,{modelValue:t(u).age,"onUpdate:modelValue":e[4]||(e[4]=l=>t(u).age=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"电话"},{default:o(()=>[a(d,{modelValue:t(u).phone,"onUpdate:modelValue":e[5]||(e[5]=l=>t(u).phone=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"密码"},{default:o(()=>[a(d,{modelValue:t(u).password,"onUpdate:modelValue":e[6]||(e[6]=l=>t(u).password=l),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),a(f,{type:"primary",onClick:t(T)},{default:o(()=>[V("更新")]),_:1},8,["onClick"]),a(f,{type:"primary",onClick:e[7]||(e[7]=l=>_(r)?r.value="":r="")},{default:o(()=>[V("退出")]),_:1})])]),_:1},8,["model"])):j("",!0),t(r)=="add"?(c(),S(B,{key:1,model:t(n),"label-width":"50px"},{default:o(()=>[z("div",null,[a(p,{label:"姓名"},{default:o(()=>[a(d,{modelValue:t(n).username,"onUpdate:modelValue":e[8]||(e[8]=l=>t(n).username=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"性别"},{default:o(()=>[a(d,{modelValue:t(n).gender,"onUpdate:modelValue":e[9]||(e[9]=l=>t(n).gender=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"角色"},{default:o(()=>[a(d,{modelValue:t(n).role,"onUpdate:modelValue":e[10]||(e[10]=l=>t(n).role=l),type:"text",disabled:t(h).state.userdata.role!="管理员"},null,8,["modelValue","disabled"])]),_:1}),a(p,{label:"年龄"},{default:o(()=>[a(d,{modelValue:t(n).age,"onUpdate:modelValue":e[11]||(e[11]=l=>t(n).age=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"电话"},{default:o(()=>[a(d,{modelValue:t(n).phone,"onUpdate:modelValue":e[12]||(e[12]=l=>t(n).phone=l),type:"text"},null,8,["modelValue"])]),_:1}),a(p,{label:"密码"},{default:o(()=>[a(d,{modelValue:t(n).password,"onUpdate:modelValue":e[13]||(e[13]=l=>t(n).password=l),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),a(f,{type:"primary",onClick:t($)},{default:o(()=>[V("添加")]),_:1},8,["onClick"]),a(f,{type:"primary",onClick:e[14]||(e[14]=l=>_(r)?r.value="":r="")},{default:o(()=>[V("退出")]),_:1})])]),_:1},8,["model"])):j("",!0),a(I,{data:t(C),style:{width:"100%"},height:"450"},{default:o(()=>[a(g,{label:"id",width:"100%",prop:"id",align:"center"}),a(g,{label:"姓名",width:"100%",prop:"username",align:"center"}),a(g,{label:"性别",width:"100%",prop:"gender",align:"center"}),a(g,{label:"角色",width:"100%",prop:"role",align:"center"}),a(g,{label:"年龄",width:"200",prop:"age",align:"center"}),a(g,{label:"密码",width:"100",prop:"password",align:"center"}),a(g,{label:"电话",width:"200",prop:"phone",align:"center"}),a(g,{label:"",align:"center"},{header:o(()=>[z("div",M,[a(d,{modelValue:t(U),"onUpdate:modelValue":e[15]||(e[15]=l=>_(U)?U.value=l:U=l),size:"small",placeholder:"Type to search"},null,8,["modelValue"]),a(f,{type:"primary",icon:t(L),onClick:t(D)},{default:o(()=>[V("Search")]),_:1},8,["icon","onClick"])])]),default:o(l=>[a(f,{size:"small",onClick:A=>t(F)(l.$index,l.row)},{default:o(()=>[V("编辑 ")]),_:2},1032,["onClick"]),a(f,{size:"small",type:"danger",onClick:A=>t(E)(l.$index,l.row)},{default:o(()=>[V("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(q,{style:{"margin-top":"10px"}},{default:o(()=>[a(N,{offset:1,span:1},{default:o(()=>[a(R,{background:"",layout:"prev, pager, next",total:t(k),"onUpdate:total":e[16]||(e[16]=l=>_(k)?k.value=l:k=l),"page-size":t(b),"onUpdate:pageSize":e[17]||(e[17]=l=>_(b)?b.value=l:b=l),"current-page":t(w),"onUpdate:currentPage":e[18]||(e[18]=l=>_(w)?w.value=l:w=l),"default-current-page":t(x),"onUpdate:defaultCurrentPage":e[19]||(e[19]=l=>_(x)?x.value=l:x=l),"pager-count":"10",span:6,onCurrentChange:t(P)},null,8,["total","page-size","current-page","default-current-page","onCurrentChange"])]),_:1}),a(N,{span:2,offset:19},{default:o(()=>[a(f,{type:"primary",span:5,onClick:e[20]||(e[20]=l=>_(r)?r.value="add":r="add")},{default:o(()=>[V("添加")]),_:1})]),_:1})]),_:1})],64)}}},Y=G(O,[["__scopeId","data-v-7644df3b"]]);export{Y as default};
